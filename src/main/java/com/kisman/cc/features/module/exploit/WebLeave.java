package com.kisman.cc.features.module.exploit;

import com.kisman.cc.features.module.*;
import com.kisman.cc.settings.Setting;
import com.kisman.cc.util.chat.cubic.ChatUtility;
import com.kisman.cc.util.chat.other.ChatUtils;
import net.minecraft.block.Block;
import net.minecraft.util.math.BlockPos;

public class WebLeave extends Module {
    private final Setting height = register(new Setting("Height", this, 5, 0, 10, false));

    public WebLeave() {
        super("WebLeave", "f", Category.EXPLOIT);
    }

    public void onEnable() {
        if(mc.player == null || mc.world == null) return;

        if (mc.world.getBlockState(new BlockPos(mc.player.posX, mc.player.posY + 1, mc.player.posZ)).getBlock() == Block.getBlockById(30)) {
            mc.player.motionY = height.getValDouble();
        } else if (mc.world.getBlockState(new BlockPos(mc.player.posX, mc.player.posY, mc.player.posZ)).getBlock() == Block.getBlockById(30)) {
            mc.player.fallDistance = 0.0f;
            mc.player.motionX = 0.0;
            mc.player.motionY = height.getValDouble();
        } else {
            ChatUtility.error().printClientModuleMessage("Web not found!");
            super.setToggled(false);
        }
    }
}
